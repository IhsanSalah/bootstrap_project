"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["11756"],{922464:function(e,t,n){var i,o;n.r(t),n.d(t,{default:()=>s});let l=(o=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90";let s=l},219077:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let o="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(),t=o.documentElement,{body:n}=o;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${o+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},291211:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),o=n(514223),l=n(767415);class s extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,s=e.keyCode||e.code;e.ctrlKey||e.metaKey||["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(s===o.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):s===o.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):s===o.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t()))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let a=s},677650:function(e,t,n){n.d(t,{Z:()=>s});var i=n(883119),o=n(785893);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function s({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,text:n}){let s=t?"200":"300";return n.split(new RegExp(/(#\S*)/)).map((t,n)=>{let a=`${n}-${t}`;return t.match(l)?(0,o.jsx)(i.xv,{color:"link",inline:!0,size:s,children:(0,o.jsx)(i.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},a):(0,o.jsx)(i.xv,{color:e?"subtle":void 0,inline:!0,size:s,children:t},a)})}},283220:function(e,t,n){n.d(t,{Z:()=>_});var i=n(667294),o=n(883119),l=n(677650),s=n(230201),a=n(133546),r=n(785893);let d=e=>e.replace(/\s+/g," "),c=e=>null!=e&&e>-1,m=(e,t)=>{let n=t.substr(0,e);return(e??0)-(n.length-d(n).length)},u=({color:e,mention:t,tagObjectId:n,tagType:i,textSize:l})=>{let{logContextEvent:a}=(0,s.v)();return(0,r.jsx)(o.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:n,tag_type:i}})},underline:"none",children:(0,r.jsx)(o.xv,{color:e,inline:!0,overflow:"normal",size:l,weight:"bold",children:t},t)},n)},_=({description:e,mentionLinkColor:t,shouldAdjustOffset:n,shouldMakeHashtagLinksFromText:s,textSize:d,userMentionTags:_})=>{let{closeupWithinMasonryEnabled:h,peekCloseupEnabled:g}=(0,a.x4)();if(0===_.length)return(0,r.jsx)(i.Fragment,{children:e});let p=0,x=[];return[..._].map(t=>n?{...t,offset:m(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>c(e.offset)&&c(e.length)).forEach(n=>{let i=n.offset??0,o=n.length??0,l=e.substr(p,i-p),s=e.substr(i,o);x.push(l),x.push((0,r.jsx)(u,{color:t,mention:s,tagObjectId:n.objectId,tagType:n.tagType,textSize:d})),p=i+o}),x.push(e.substr(p)),(s?x.flatMap(e=>"string"!=typeof e?e:(0,l.Z)({closeupWithinMasonryEnabled:h,peekCloseupEnabled:g,text:e})):x).reduce((e,t)=>(0,r.jsxs)(o.xv,{inline:!0,size:d,children:[e,t]}),null)}},21558:function(e,t,n){n.d(t,{N:()=>d,d:()=>r});var i=n(667294),o=n(786482),l=n(213491),s=n(785893);let{Provider:a,useHook:r}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,r]=(0,i.useState)(o.Zw.REPORT),[d,c]=(0,i.useState)(o.qb.STARTED),[m,u]=(0,i.useState)(),[_,h]=(0,i.useState)(),g=(0,i.useMemo)(()=>({flagReason:_,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:h,setFlow:r,setModalTitle:n,setStatus:c,setSelectedReason:u}),[t,l,d,m,_]);return(0,s.jsx)(a,{value:g,children:e})}},786482:function(e,t,n){n.d(t,{Vm:()=>l,Zw:()=>i,qb:()=>o});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},o={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},992998:function(e,t,n){n.d(t,{Z:()=>a});var i=n(883119),o=n(583875),l=n(138596),s=n(785893);let a=({isQuestion:e,name:t,size:n,src:a})=>{let r=(0,l.ZP)();return(0,s.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(o.qE,{name:t,size:n,src:a}),e&&(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},548686:function(e,t,n){n.d(t,{f:()=>a,v:()=>r});var i=n(667294),o=n(213491),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("CommentMedia");function r({children:e}){let[t,n]=(0,i.useState)({height:150,width:150}),[o,a]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),[u,_]=(0,i.useState)(""),h=()=>{a(null),d(null),m(null),_("")},g=(0,i.useCallback)(()=>h(),[]),p=(0,i.useMemo)(()=>({mediaDimensions:t,mediaId:r,mediaType:c,mediaUrl:u,photoFile:o,removeSelectedPhoto:g,setMediaDimensions:n,setMediaId:d,setMediaType:m,setMediaUrl:_,setPhotoFile:a}),[t,o,r,c,u,g]);return(0,l.jsx)(s,{value:p,children:e})}},453471:function(e,t,n){n.d(t,{Z:()=>ed});var i=n(883119),o=n(667294),l=n(581722),s=n(473727),a=n(219077),r=n(331128),d=n(21558),c=n(992998),m=n(138596),u=n(785893);let _=({color:e,isMarkedHelpful:t})=>{let n=(0,m.ZP)();return(0,u.jsx)(i.JO,{accessibilityLabel:n._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful'),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var h=n(333651),g=n(773655),p=n(583875);let x={helpfulStyle:{backgroundImage:`url(${h})`},lovedStyle:{backgroundImage:`url(${g})`}},y=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:n})=>{let o=14===e.reaction_type,l=1===e.reaction_type,s=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.Tg,{href:`/${e.user.username}/`,onBlur:n,onFocus:t,children:(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xu,{maxWidth:40,children:(0,u.jsx)(p.qE,{accessibilityLabel:"",name:s,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:s})})]})}),(0,u.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[l&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),o&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var f=n(661376),b=n(462867),v=n(200619),j=n(601871);let I=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],P=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:n,isLovedByMe:l,isTry:s,maybeDismissReactionListWithDelay:a})=>{let r=(0,b.Z)(),d=(0,v.Z)(),c=(0,f.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:I}}),m=(0,j.lJ)(r,d)||("id"in r&&r.id?r.id:""),_=c.data;(l||n)&&_&&(_=_.filter(e=>e.user.id!==m),_=[{id:e,reaction_type:l?1:14,user:{first_name:(0,j.Fk)(r,d),full_name:(0,j.Fk)(r,d),id:m,image_medium_url:(0,j.gJ)(r,d),is_private_profile:!!r.isAuth&&!!r.isPrivateProfile,username:(0,j.Ms)(r,d)}},..._]);let h=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let{current:e}=h,t=()=>{c.isFetching||(c.isAtEnd?e?.removeEventListener("scroll",t):c.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[c]),(0,u.jsx)(i.xu,{ref:h,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:_?.map(e=>u.jsx(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:u.jsx(y,{handleReactionListHover:t,maybeDismissReactionListWithDelay:a,response:e})},e.id))})};var A=n(825605),C=n(632492);let w=(0,o.lazy)(()=>n.e("22979").then(n.bind(n,674565))),S="comment-reaction-container-entry-point",T=({commentId:e,dismissReactionList:t,helpfulCount:n,inCommentRepRedesignExp:l,isMarkedHelpfulByMe:s,isLovedByMe:a,isReactionListOpen:r,isTry:d,lovedCount:c,onReactionCountHover:_,onToggleHelpful:p,onToggleLove:x})=>{let y=(0,m.ZP)(),f=(0,o.useRef)(null),b=l?12:16,[v,j]=(0,o.useState)(!1),I=!1,T=(c||0)+(n||0);s&&a&&(T-=1);let E=e=>()=>{j(e)},L=()=>{I=!0,_()},k=()=>{I=!1,setTimeout(()=>{I||t()},1e3)},z=l?(0,u.jsxs)(i.xu,{"data-test-id":S,marginBottom:.25,children:[v&&(0,u.jsx)(i.xu,{bottom:!0,marginBottom:4,position:"absolute",children:(0,u.jsx)(i.iP,{onTap:E(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(w,{inCommentRepRedesignExp:l,onClickOutside:E(!1),setHelpful:p(!0),setLoved:x(!0)})})})}),(0,u.jsx)(i.iP,{onMouseDown:E(!0),children:(0,u.jsx)(i.JO,{accessibilityLabel:y._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"default",icon:"heart-outline",size:b})})]}):(0,u.jsx)(i.xu,{"data-test-id":S,children:v?(0,u.jsx)(i.iP,{onMouseLeave:E(!1),onTap:E(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(w,{setHelpful:p(!0),setLoved:x(!0)})})}):(0,u.jsx)(i.iP,{onMouseEnter:E(!0),onTap:E(!0),children:(0,u.jsx)(i.JO,{accessibilityLabel:y._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:b})})});return(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[s||a?(0,u.jsx)(i.iP,{onTap:()=>{p(!1)(),x(!1)()},children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${a?g:h})`,backgroundSize:"contain"}},"data-test-id":a?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:b,width:b})}):z,T>0&&(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.iP,{onMouseEnter:L,onMouseLeave:k,onTap:L,children:(0,u.jsx)(i.xu,{ref:f,"data-test-id":"comment-reaction-container-reaction-count",display:l?"flex":void 0,children:(0,u.jsx)(i.xv,{color:l?"default":"subtle",inline:!0,size:l?"100":"200",weight:"bold",children:T})})}),r&&(0,u.jsx)(i.mh,{zIndex:C.lI,children:(0,u.jsx)(i.J2,{anchor:f.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,u.jsx)(i.iP,{onMouseEnter:L,onMouseLeave:k,children:(0,u.jsx)(P,{commentId:e,handleReactionListHover:L,isLovedByMe:a,isMarkedHelpfulByMe:s,isTry:d,maybeDismissReactionListWithDelay:k})})})})]})]})};var E=n(458465),L=n(812928),k=n(634395),z=n(351979),R=n(299136);function O(e){let{comment:t,commentTags:n,handlePhotoTap:l,inCommentRepRedesignExp:s,isDesktop:a,photoCommentingEnabled:r,previewPhoto:d,taggedUsers:c}=e,[m,_]=(0,o.useState)(!1),{user:{username:h}}=t,g="text"in t?t.text:t.details,p=s?g:`${h} ${g}`,{height:x,url:y,width:f}=d||{},b=x??z.Vb,v=f??z.mu;return(0,u.jsxs)(i.xu,{children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:c,tags:n,text:p}),r||s?(0,u.jsx)(i.xu,{marginBottom:s?1.5:void 0,marginTop:s?.5:1,children:(0,u.jsx)(z.ZP,{canEnlargePhoto:a,isSelectedPhoto:!1,previewPhoto:d})}):(0,u.jsx)(i.xu,{height:150,marginBottom:a?4:2,marginTop:1,width:150,children:(0,u.jsx)(i.iP,{disabled:!a,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onTap:l,children:(0,u.jsx)(i.zd,{rounding:2,wash:!0,children:y&&(0,u.jsx)(i.Ee,{alt:y,color:"#efefef",naturalHeight:b,naturalWidth:v,src:y,children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:a?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${m?.4:0})`}},height:"100%",width:"100%"})},y)})})})]})}var D=n(351736),N=n(216975),M=n(264267),Z=n(438274);function U(e){let{shouldPreviewNewReply:t,featuredCommentId:n,parentId:s,parentType:a,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isReadOnly:_,openOverflowMenu:h,replyingToCommentId:g,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,isORBACProfileManager:f,isVideo:b,storyPinDataId:v,pinId:j,closeupAttributionId:I,aggregatedPinDataId:P,closeupAttributionUsername:A,pinnerId:C,reactionListCommentId:w,showReactionListForComment:S,viewParameter:T}=e,E=(0,m.ZP)(),L=(0,D.vs)(),k=(0,M.lV)(),z=(0,l.v9)(({feeds:e})=>{let n=e[`${Z.Z.AGGREGATED_COMMENT_REPLIES}:${s}`]||[],i=e[`${Z.Z.AGGREGATED_COMMENTS}:${s}`]||[];return n.concat(i).reduceRight((e,{id:n})=>{let i=k[n];return i?t?[i,...e]:[...e,i]:e},[])}),[R,O]=(0,o.useState)(1),U=R===z.length;return(0,u.jsxs)(o.Fragment,{children:[z.length>1&&(0,u.jsx)(i.iP,{onTap:()=>{O(U?0:z.length)},children:(0,u.jsxs)(i.xu,{alignItems:r?"center":void 0,display:r?"flex":void 0,marginBottom:r?6:4,children:[r?(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:L?"white":"black"}},height:1,marginEnd:2,width:32}):(0,u.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(i.xv,{color:r?"default":"subtle",inline:!0,size:"100",weight:"bold",children:U?E._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,N.nk)(E.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', z.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:z.length})})]})}),(0,u.jsx)(ed,{aggregatedPinDataId:P,closeupAttributionId:I,closeupAttributionUsername:A,comments:z.slice(0,R),commentsDisabled:!1,featuredCommentId:n,gapSize:r?6:2,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isORBACProfileManager:f,isReadOnly:_,isVideo:b,openOverflowMenu:h,parentId:s,parentType:a,pinId:j,pinnerId:C,reactionListCommentId:w,replyingToCommentId:g,showReactionListForComment:S,storyPinDataId:v,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,userAvatarSize:"sm",viewParameter:T})]})}var F=n(230201),H=n(236269),B=n(924591),W=n(995514),G=n(424868),K=n(613567),$=n(774838),V=n(233597),J=n(577356),Y=n(107889),q=n(133546),Q=n(281888),X=n(872003),ee=n(858254),et=n(426130),en=n(826681),ei=n(194442);let eo=(0,o.lazy)(()=>n.e("8184").then(n.bind(n,265994))),el=(0,ei.Z)(()=>n.e("73842").then(n.bind(n,715490)),void 0,"app-packages-comment-CommentOverflowPopover"),es=(0,o.lazy)(()=>n.e("90658").then(n.bind(n,167446)));function ea(e){let t,n;let{aggregatedPinDataId:h,shouldPreviewNewReply:g,closeupAttributionId:p,closeupAttributionUsername:x,comment:y,featuredCommentId:f,inCommentRepRedesignExp:I,isDesktop:P,isReadOnly:C,isVideo:w,openOverflowMenu:S,toggleReplyComposer:z,parentId:Z,parentType:ei=Y.o.pin,pinId:ea,storyPinDataId:er,replyingToCommentId:ed,showReactionListForComment:ec,showTopCommentHeading:em,toggleHelpful:eu,toggleLike:e_,userAvatarSize:eh,isORBACProfileManager:eg,pinnerId:ep,reactionListCommentId:ex,viewParameter:ey}=e,{user:{id:ef,first_name:eb,id:ev,image_medium_url:ej,username:eI},id:eP,is_translatable:eA,comment_count:eC,helpful_count:ew,tags:eS=[]}=y,[eT,eE]=(0,o.useState)(!1),eL=eT&&y.translatedText||y.text,ek=!eA||""===y.translatedText,ez=!1,eR=0,eO=!1,eD=!!y.marked_helpful_by_me,eN=I?[]:[y.user],eM="",eZ=new Date;"aggregatedcomment"===y.type?(ez=y.highlighted_by_pin_owner,eR=y.reaction_counts[1],eO=y.reaction_by_me>0,n=y?.media?.sticker,eN.push(...y.tagged_users),eM=I?eL??"":`${eI} ${eL??""}`,eZ=new Date(y.created_at)):(eR=y.like_count,eO=y.liked_by_me,t=y.images[0]||{},eM=I?y.details:`${eI} ${y.details}`,eZ=new Date(y.done_at));let eU=t?.["150x150"],eF=t?.originals,eH=n||eF,eB=(0,m.ZP)(),eW=(0,b.Z)(),{setIsMediaViewerOpen:eG,clientTrackingParams:eK}=(0,q.x4)(),{logContextEvent:e$}=(0,F.v)(),{country:eV,countryFromIp:eJ,isBot:eY}=(0,$.B)(),{checkExperiment:eq}=(0,K.F)(),{showToast:eQ}=(0,J.F9)(),eX=(0,l.I0)(),e0=(0,D.vs)(),e1=(0,o.useRef)(null),e2=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eV),{COUNTRY_CODES:e6}=ee.a0.india||{},e9=eJ&&e6&&e6.includes(eJ),e3=!C||e9||e2,e8="aggregatedcomment"===y.type&&1===y.comment_tag,e4=e8&&!I,e7=(0,v.Z)(),e5=(0,j.lJ)(eW,e7),{nativeEngagementsHiddenForUser:te}=(0,X.G)(),{aggregatedCommentsHiddenForUser:tt,translateAggregatedComment:tn,updateAggregatedComment:ti}=(0,M.nf)(),to=(0,r.Z)(),tl="userdiditdata"===y.type,ts=(0,W.Z)(),ta=tl&&P&&eq("ce_dweb_photo_comments").anyEnabled,tr=eA&&!1,td=ta||I?eF:eU,tc=(0,E.zs)(eI,eS,e0,I),tm={SHOW_TRANSLATION:eB._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eB._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eB._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},tu=(0,o.useRef)(tm.SHOW_TRANSLATION),[t_,th]=(0,a.Z)(),[tg,tp]=(0,o.useState)(!1),[tx,ty]=(0,o.useState)(!1),[tf,tb]=(0,o.useState)(!1),[tv,tj]=(0,o.useState)(!1),[tI,tP]=(0,o.useState)(!1),[tA,tC]=(0,o.useState)(!1),[tw,tS]=(0,o.useState)(!1),[tT,tE]=(0,o.useState)(E.A9.NONE),tL=!!n&&tx&&P&&eq("ce_dweb_sticker_comments").anyEnabled,tk=e=>()=>{ty(e)};(0,o.useEffect)(()=>{tr&&e$({event_type:10416,view_type:3,view_parameter:ey,component:"pin"===ei?13696:13697})},[e$,ei,tr,ey]),(0,o.useEffect)(()=>{eC>0&&!eY&&eX((0,V.U)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:eP,redux_normalize_feed:!0}}))},[y.type,eP]);let tz=ei.toLowerCase()===Y.o.aggregatedComment.toLowerCase()||ei.toLowerCase()===Y.n.didIt.toLowerCase(),tR=y.user.first_name||"",tO=async({contentMarkdown:e,force:t,tags:n})=>{let i,o;tj(!0);let l=y.id;if(tz&&(i=ei.toLowerCase()===Y.n.didIt,l=Z,o=y.id),l)try{await to({force:t,fromUnifiedComment:!0,objectType:tl||i?Y.o.didIt:Y.o.aggregatedComment,objectId:l,orbacSubjectId:e5,tags:n,text:e,replyToCommentId:o})}catch(t){let e=(0,H.Z)(t,"code");if([G.ky,G.LJ].includes(e??0)&&P)return tE(e===G.ky?E.A9.WARNING:E.A9.BLOCK),tj(!1),!1}return z&&z(void 0),tj(!1),!0},tD=async({contentMarkdown:e,force:t,tags:n})=>{tb(!0);try{ta?await eX((0,et.IU)({id:y.id,details:e,pinId:ea??"",image_signatures:"image_signatures"in y&&y.image_signatures?y.image_signatures:[]})):await ti({commentId:y.id,force:t,orbacSubjectId:e5,tags:n,text:e})}catch(e){if([G.ky,G.LJ].includes((0,H.Z)(e,"code")??0)&&P)return tE(e.code===G.ky?E.A9.WARNING:E.A9.BLOCK),tb(!1),!1}return ty(!1),tb(!1),!0},tN=()=>{P?tp(!tg):S&&S(y,{showIndiaLawReporting:!!e9,showNetzDGReporting:!!e2})},tM=e=>()=>{tp(e),tS(e),e||e$({component:14349,event_type:9408})},tZ=()=>{tE(E.A9.NONE)},tU=e=>{e?th():t_(),eG(!e),tP(!e)},tF=()=>{eT||y.translatedText||tn(y.id),eT||tu.current!==tm.SHOW_TRANSLATION?eT&&tu.current===tm.SHOW_ORIGINAL&&e$({event_type:10418,view_type:3,view_parameter:ey,component:"pin"===ei?13696:13697}):e$({event_type:10417,view_type:3,view_parameter:ey,component:"pin"===ei?13696:13697}),eE(!eT)};(0,o.useEffect)(()=>{eT&&ek&&(eE(!eT),eQ(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:eB._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[eT,ek]),eT?tu.current=y.translatedText?tm.SHOW_ORIGINAL:tm.TRANSLATING:tu.current=tm.SHOW_TRANSLATION;let tH=P?128:110,tB="aggregatedcomment"===y.type&&y.media?.sticker?.image_url&&(0,u.jsx)(i.xu,{height:tH,marginBottom:P?1:0,marginTop:1,width:tH,children:y.media?.sticker?.image_url&&(0,u.jsx)(i.Ee,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media.sticker.image_url})});return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.$j,{accessibilityLabel:"Loading comment",show:tf}),!tx&&!tf&&(0,u.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(i.xu,{marginEnd:2,children:(0,u.jsx)(s.rU,{to:`/${eI}/`,children:(0,u.jsx)(c.Z,{isQuestion:e4,name:eb||eI||"",size:eh,src:ej??""})})}),(0,u.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(i.kC,{justifyContent:"between",children:[(0,u.jsx)(i.kC.Item,{minWidth:0,children:(0,u.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[I&&(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[y.user],tags:(0,E.zs)(eI,[],e0),text:eI}),e8&&!em&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:eB._('asked a question \uD83D\uDC40', 'comment.question.label', 'label on a comment that is a question')})}),em&&(0,u.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,u.jsx)(Q.Z,{headingSize:"100",iconSize:12})}),(e8||em)&&eZ&&(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:"·"}),eZ&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:ts(eZ,!0)})})]}),tl?(0,u.jsx)(O,{comment:y,commentTags:tc,handlePhotoTap:()=>tU(tI),inCommentRepRedesignExp:I,isDesktop:P,photoCommentingEnabled:ta,previewPhoto:td,taggedUsers:eN}):(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!I,lineHeight:I?"21px":void 0,marginBottom:I?"4px":void 0,shouldShowFirstNameOnly:!0,taggedUsers:eN,tags:tc,text:eM}),tB,tr&&(0,u.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(i.iP,{onTap:()=>tF(),children:(0,u.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tu.current})})})]})}),f===eP&&(0,u.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),ez&&(0,u.jsx)(i.xu,{marginBottom:I?1.5:3,marginTop:I?-.5:4,children:(0,u.jsx)(i.xv,{size:"100",children:(0,N.nk)(eB._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:x})})}),e3&&(0,u.jsxs)(i.xu,{alignItems:"center",display:"flex",height:P?25:"100%",justifyContent:"between",position:"relative",children:[(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:I?4:5,column:0},children:[!C&&!I&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",children:ts(eZ,!0)})}),!C&&(0,u.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(i.iP,{onTap:()=>{z&&z(y,Z,ei)},children:(0,u.jsx)(i.xv,{color:I?"default":"subtle",size:I?"100":"200",weight:"bold",children:eB._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!C&&(P||I?(0,u.jsx)(T,{commentId:eP,dismissReactionList:()=>{ec(void 0)},helpfulCount:ew,inCommentRepRedesignExp:I,isLovedByMe:eO,isMarkedHelpfulByMe:eD,isReactionListOpen:ex===eP,isTry:tl,lovedCount:eR,onReactionCountHover:()=>{ec(eP),e$({event_type:9906,component:"pin"===ei?13696:13697,view_type:3,view_parameter:ey})},onToggleHelpful:e=>()=>{eD!==e&&eu(eP,!e,tl)()},onToggleLove:e=>()=>{eO!==e&&e_(eP,!e,tl)()}}):(0,u.jsxs)(i.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(i.hU,{accessibilityLabel:eB._('Like', 'comment.button.like', 'like or unlike comment'),icon:"heart",iconColor:eO?"red":"gray",onClick:e_(eP,eO,tl),size:"xs"}),eR>0&&(0,u.jsx)(i.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eR})})]})),!("id"in eW&&eW.id===ev&&e8)&&(I?(0,u.jsx)(i.iP,{onTap:tN,children:(0,u.jsx)(i.JO,{accessibilityLabel:eB._('More', 'comment.button.more', 'see more options for comment'),color:e0?"light":"dark",icon:"ellipsis",size:12})}):(0,u.jsx)(i.xu,{ref:e1,"data-test-id":"comment-more-options",children:(0,u.jsx)(i.hU,{accessibilityLabel:eB._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:tN,size:"xs"})}))]}),!C&&!eg&&!P&&!I&&(0,u.jsx)(i.xu,{marginStart:6,children:(0,u.jsx)(i.iP,{fullWidth:!1,onTap:eu(eP,eD,tl),children:(0,u.jsxs)(i.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(_,{color:"subtle",isMarkedHelpful:eD}),(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:eB._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful')}),ew>0&&(0,u.jsx)(i.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:ew})})]})})})]})]})]}),P&&(0,u.jsxs)(o.Fragment,{children:[tx&&(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(L.Z,{clientTrackingParams:eK,commentWarningModalState:tT,dismissCommentWarningModal:tZ,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:Y.o.aggregatedComment,onAddItem:tD,onCancelItem:tk(!1),postedPhoto:ta||tL?eH:eU,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})}),ed===eP&&(0,u.jsx)(i.xu,{marginStart:tz?0:12,marginTop:3,children:(0,u.jsx)(L.Z,{commentWarningModalState:tT,dismissCommentWarningModal:tZ,initialTags:tz?[{offset:0,object_id:ef,length:tR.length,tag_type:1}]:[],initialText:tz?`${tR} `:"",isReplying:!0,objectType:Y.o.aggregatedComment,onAddItem:tO,onCancelItem:()=>{z&&z()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})})]}),(eC>0||tv)&&(0,u.jsx)(i.xu,{marginStart:I?10:12,marginTop:I?3:4,children:(0,u.jsx)(U,{aggregatedPinDataId:h,closeupAttributionId:p,closeupAttributionUsername:x,featuredCommentId:f,inCommentRepRedesignExp:I,isDesktop:P,isLoading:tv,isORBACProfileManager:eg,isReadOnly:C,isVideo:w,openOverflowMenu:S,parentId:eP,parentType:y.type,pinId:ea,pinnerId:ep,reactionListCommentId:ex,replyingToCommentId:ed,shouldPreviewNewReply:g,showReactionListForComment:ec,storyPinDataId:er,toggleHelpful:eu,toggleLike:e_,toggleReplyComposer:z,viewParameter:ey})}),P&&e3&&(0,u.jsx)(el,{aggregatedPinDataId:h,anchor:e1.current,closeupAttributionId:p,comment:y,dismiss:e=>{tp(!1),e||e$({component:14349,event_type:10128})},isOpen:tg,isReply:tz,onEdit:tk(!0),onShowBlockUserModal:tM(!0),parentId:Z,pinId:ea,pinnerId:ep,showIndiaLawReporting:!!e9,showNetzDGReporting:e2}),tA&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(d.N,{children:(0,u.jsx)(es,{aggregatedPinDataId:h,didItDataId:eP,onClose:e=>()=>{tC(!e)},pinId:ea??"",username:eI,users:[y.user]})})}),tw&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(eo,{firstName:eb??"",onBlockUser:()=>{eX((0,en.Ge)({id:ef,orbacSubjectId:e5,blockSource:"comment",blockContext:eP,logContextEvent:e$})),tt(ef),te(ef),e$({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eW.isAuth?eW.id:null}}),e$({component:14349,event_type:9407}),tS(!1),eQ(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:(0,N.nk)(eB._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:eI}).join("")}))},onClearModal:tM(!1)})}),!!eF&&tI&&(0,u.jsx)(k.Z,{onDismiss:()=>tU(tI),photo:eF})]})}var er=n(79271);function ed(e){let t;let{aggregatedPinDataId:n,shouldPreviewNewReply:o,comments:l,commentsDisabled:s,commentsScrollContainerRef:a,featuredCommentId:r,gapSize:d=6,inCommentRepRedesignExp:c,isDesktop:_,isLoaded:h=!1,isLoading:g=!1,isReadOnly:p,openOverflowMenu:x,toggleReplyComposer:y,parentId:f,parentType:v,replyingToCommentId:j,showingCloseupCommentModule:I,toggleHelpful:P,toggleLike:A,userAvatarSize:C,isORBACProfileManager:w,isVideo:S,storyPinDataId:T,pinId:E,closeupAttributionId:L,closeupAttributionUsername:k,pinnerId:z,showReactionListForComment:R,reactionListCommentId:O,viewParameter:D}=e,N=(0,m.ZP)(),M=(0,b.Z)(),{closeupWithinMasonryEnabled:Z,isCloseupRelatedPinsAboveTheFoldEnabled:U}=(0,q.x4)(),F=M.isAuth||_?N._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message'):N._('No comments yet!', 'commentThread.emptyState.unauthMessage', 'comment thread empty state message in LOP');return(t=T?"story":S?"video":"pin",s)?(0,u.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:Z?2:void 0,width:"100%",children:(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:N._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):l.length>0?(0,u.jsxs)(i.xu,{ref:a,dangerouslySetInlineStyle:{__style:{gap:`${4*d}px 0`,scrollbarGutter:Z?"stable":void 0,paddingTop:Z?"8px":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",maxHeight:Z?722:"100%",overflow:Z?"auto":void 0,width:"100%",children:[l.map((e,l)=>(0,u.jsx)(er.F,{componentType:"pin"===v?13696:13697,impressionAuxFields:{commentId:e.id,pinId:E,pinOwnerUserId:L,pinType:t,parentId:f,parentType:v,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:l,viewType:_?3:98,children:({impressionTrackerRef:t})=>(0,u.jsx)(i.xu,{ref:t,"data-test-id":"commentThread-comment",tabIndex:0,children:(0,u.jsx)(ea,{aggregatedPinDataId:n,closeupAttributionId:L,closeupAttributionUsername:k,comment:e,featuredCommentId:r,inCommentRepRedesignExp:c,isDesktop:_,isORBACProfileManager:w,isReadOnly:p,isVideo:S,openOverflowMenu:x,parentId:f,parentType:v,pinId:E,pinnerId:z,reactionListCommentId:O,replyingToCommentId:j,shouldPreviewNewReply:o,showReactionListForComment:R,showTopCommentHeading:!!I&&0===l,storyPinDataId:T,toggleHelpful:P,toggleLike:A,toggleReplyComposer:y,userAvatarSize:C,viewParameter:D})})},e.id)),g&&(0,u.jsx)(i.$j,{accessibilityLabel:N._('Comments loading', ' - ', ' -- '),show:g})]}):(0,u.jsxs)(i.xu,{alignSelf:"center",width:"100%",children:[(0,u.jsx)(i.$j,{accessibilityLabel:N._('Comments loading', ' - ', ' -- '),show:g}),h&&!U&&(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:F})]})}},812928:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),o=n(548686),l=n(317109),s=n(785893);let a=(0,i.lazy)(()=>Promise.all([n.e("89558"),n.e("85347"),n.e("45474")]).then(n.bind(n,269936)));function r(e){let{handlePhotoSelect:t}=e;return(0,s.jsx)(l.Z,{fallback:null,children:t?(0,s.jsx)(a,{...e}):(0,s.jsx)(o.v,{children:(0,s.jsx)(a,{...e})})})}},634395:function(e,t,n){n.d(t,{Z:()=>r});var i=n(883119),o=n(291211),l=n(289935),s=n(138596),a=n(785893);function r({onDismiss:e,photo:t}){let n=(0,s.ZP)(),{height:r,url:d,width:c}=t,m=Math.min(r??936,936),u="100vh",_=n._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,a.jsxs)(i.mh,{zIndex:l.b7,children:[(0,a.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,a.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:u,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,a.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,a.jsx)(i.hU,{accessibilityLabel:_,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,a.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:u,maxHeight:m,width:c,children:d&&(0,a.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:r??1,naturalWidth:c??1,src:d},d)})]})}),(0,a.jsx)(o.Z,{onClose:e})]})}},351979:function(e,t,n){n.d(t,{Vb:()=>h,ZP:()=>x,mu:()=>g});var i=n(667294),o=n(883119),l=n(219077),s=n(458465),a=n(55806),r=n(634395),d=n(138596),c=n(774838),m=n(739405),u=n(133546),_=n(785893);let h=150,g=346,p=e=>new Promise((t,n)=>{let i=new Image;i.onload=()=>{t({width:i.width,height:i.height})},i.onerror=n,i.src=e});function x({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:n,previewPhoto:x,removeSelectedPhoto:y}){let f=(0,d.ZP)(),b=(0,m.HG)(),{isRTL:v}=(0,c.B)(),{setIsMediaViewerOpen:j}=(0,u.x4)(),[I,P]=(0,l.Z)(),[A,C]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1),[T,E]=(0,i.useState)(null),[L,k]=(0,i.useState)(s.WU),z=(0,a.Z)(x)?x?.url:x?.image_url;(0,i.useEffect)(()=>{(async()=>{z&&!(0,a.Z)(x)&&E(await p(z))})()},[z,x]);let R=(0,a.Z)(x)?x?.width:T?.width,O=(0,a.Z)(x)?x?.height:T?.height,D=R??0,N=O??0,M=z??"",Z=Math.min((t||(b?g:312))/D,(b?h:110)/N,1),U=f._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),F=f._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),H=e=>{e?P():I(),j(!e),C(!e)};return(0,_.jsxs)(o.xu,{height:Z*N,marginTop:n?3:0,position:"relative",width:Z*D,children:[(0,_.jsx)(o.iP,{disabled:!e,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onTap:()=>H(A),children:(0,_.jsx)(o.zd,{rounding:2,children:M&&(0,_.jsx)(o.Ee,{alt:F,color:L,naturalHeight:N,naturalWidth:D,onLoad:()=>{k(s.o),n&&URL.revokeObjectURL(M)},src:M,children:e&&(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${w?.4:0})`}},height:"100%",width:"100%"})},F)})}),n&&(0,_.jsx)(o.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:v,marginEnd:-3,marginTop:-3,position:"absolute",right:!v,top:!0,width:24,children:(0,_.jsx)(o.hU,{accessibilityLabel:U,bgColor:"lightGray",icon:"cancel",onClick:y,size:"xs"})}),A&&(0,_.jsx)(r.Z,{onDismiss:()=>H(A),photo:x})]})}},299136:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),o=n(883119),l=n(785893);let s=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:n,marginBottom:s,marginEnd:a,shouldShowFirstNameOnly:r,size:d,tags:c,taggedUsers:m,text:u})=>{let _=(0,i.useRef)(null),h=(e,t)=>(0,l.jsx)(o.xv,{inline:!0,overflow:"normal",size:d,children:(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t),g=(n,i,s,a)=>{let c=r||0===s&&t?m[s].first_name||m[s].username[0]:i;return(0,l.jsx)(o.xv,{color:n,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?c:(0,l.jsx)(o.rU,{display:"inlineBlock",href:`/${m[s].username}`,underline:"hover",children:c})},a)};return(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:s}},children:(()=>{if(!c.length||!m||c.length!==m.length)return h(u,"1");let t=0,i=[];return c.forEach((e,n)=>{let o=u.substring(t,e.offset);t=e.offset+e.length;let l=u.substring(e.offset,t);i=i.concat(h(o,`${n}a`)).concat(g(e.color,l,n,`${n}b`))}),i=i.concat(h(u.substring(t),"2")),(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n}},display:r?"flex":void 0,marginEnd:a??3,position:"relative",children:(0,l.jsx)(o.xv,{ref:_,inline:!0,lineClamp:e?1:void 0,size:d,children:i})})})()})}},458465:function(e,t,n){n.d(t,{A9:()=>m,F1:()=>f,Ff:()=>y,G5:()=>b,G_:()=>x,LH:()=>l,Rv:()=>a,TJ:()=>d,WU:()=>_,i$:()=>h,iB:()=>o,mi:()=>v,mz:()=>p,o:()=>u,pW:()=>c,qJ:()=>P,sp:()=>j,uC:()=>s,xA:()=>r,yQ:()=>I,zs:()=>g});var i=n(696749);let o=48,l=56,s=500,a=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),r=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),d="comment_featured_ids",c="did_it_featured_ids",m={NONE:"none",WARNING:"warning",BLOCK:"block"},u="transparent",_="#efefef",h=(e,t)=>e?(0,i.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),g=(e,t,n,i)=>{let o=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"shopping"}));return i?o:[{offset:0,length:e.length,color:n?"light":"dark"},...o]},p=e=>e._('Add one to start the conversation', 'closeup.commentThread.emptyState.message', 'Comment thread empty state message'),x=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),y=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),f=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),b=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),v=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),j=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),I=e=>e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container'),P=e=>[b(e),v(e),x(e),j(e),I(e)]},55806:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.url!==void 0},281888:function(e,t,n){n.d(t,{Z:()=>d});var i=n(667294),o=n(883119),l=n(876594),s=n(306902),a=n(138596),r=n(785893);function d({hasBackground:e,headingSize:t,iconSize:n}){let d=(0,a.ZP)(),c=(0,s.Z)(),m=e?20:void 0,u=d._('Comment module heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),_=d._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module');return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:e?l.efI:void 0,display:"inline-flex"}},height:m,justifyContent:"center",marginEnd:1,rounding:c?2:"circle",width:m,children:(0,r.jsx)(o.JO,{accessibilityLabel:u,color:"recommendation",icon:"star",inline:!0,size:n})}),(0,r.jsx)(o.xu,{display:"inlineBlock",children:(0,r.jsx)(o.xv,{color:"recommendation",size:t,weight:"bold",children:_})})]})}},624333:function(e,t,n){n.d(t,{B:()=>I,Z:()=>C});var i,o=n(667294),l=n(581722);n(167912);var s=n(616550),a=n(883119),r=n(453471),d=n(907022),c=n(661376),m=n(739405),u=n(893957),_=n(462867),h=n(200619),g=n(601871),p=n(264267),x=n(107889),y=n(301527),f=n(426130),b=n(646239),v=n(157498),j=n(785893);let I=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:o=!1,noCache:l=!1,orbacSubjectId:s=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:o,...s?{orbac_subject_id:s}:{}},noCache:l}),P=void 0!==i?i:i=n(922464),A=({aggregatedPinDataId:e,inCommentRepRedesignExp:t,shouldPreviewNewReply:n,closeupAttributionId:i,closeupAttributionUsername:d,commentsDisabled:P,hasComments:A,isReadOnly:C,pinId:w,isVideo:S,pinnerId:T,scrollContainer:E,setIsComposingNewComment:L=()=>{},showingCloseupCommentModule:k,storyPinDataId:z,viewParameter:R,toggleComposerForReply:O,openMwebOverflowMenu:D})=>{let{comment_id:N}=(0,s.UO)(),M=(0,l.I0)(),Z=(0,m.HG)(),U=(0,_.Z)(),F=(0,o.useRef)(A),H=(0,h.Z)(),B=(0,g.lJ)(U,H),W=(0,c.Z)(F.current&&e?I({aggregatedPinDataId:e,featuredCommentIds:N?[N]:[],isDesktop:Z}):null),{removeUnauthCommentPinId:G,unauthCommentPinId:K}=(0,y.C)(),$=(0,p.lV)(),{toggleAggregatedCommentHelpful:V,toggleAggregatedCommentLike:J}=(0,p.nf)(),Y=(0,v.kW)(),q=(0,l.v9)(t=>(0,b.Z)(t,{aggregatedPinDataId:e,aggregatedComments:$,users:Y})),[Q,X]=(0,o.useState)(void 0),ee=()=>{L(!0)};return(0,u.Z)(()=>{!Z&&U.isAuth&&K&&w&&K===w&&(ee(),G())}),(0,o.useEffect)(()=>{let e=()=>{let t=!!E&&E.scrollTop+E.clientHeight+10>=E.scrollHeight;W&&!W.isFetching&&(W.isAtEnd?E?.removeEventListener("scroll",e):t&&W.fetchMore())};return E?.addEventListener("scroll",e),()=>{E?.removeEventListener("scroll",e)}},[W,E]),(0,j.jsx)(o.Fragment,{children:(0,j.jsx)(a.xu,{display:"flex",height:t&&0===q.length?"100%":void 0,marginTop:Z?6:t?2:0,width:"100%",children:(0,j.jsx)(r.Z,{aggregatedPinDataId:e,closeupAttributionId:i,closeupAttributionUsername:d,comments:q,commentsDisabled:P,inCommentRepRedesignExp:t,isDesktop:Z,isLoaded:W&&W.isLoaded||!A,isReadOnly:C,isVideo:S,openOverflowMenu:D,parentId:e??"",parentType:x.o.pin,pinId:w,pinnerId:T,reactionListCommentId:Q,shouldPreviewNewReply:n,showingCloseupCommentModule:k,showReactionListForComment:X,storyPinDataId:z,toggleHelpful:(e,t,n)=>()=>{n?M((0,f.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})):V({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})},toggleLike:(e,t,n)=>()=>{n?M((0,f.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:B})):J({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:B})},toggleReplyComposer:O,userAvatarSize:"sm",viewParameter:R})})})};function C({pinKey:e,...t}){let n=(0,d.Z)(P,e),i=(n?.aggregatedPinData?.commentCount||0)+(n?.aggregatedPinData?.didItData?.imagesCount||0);return(0,j.jsx)(A,{aggregatedPinDataId:n?.aggregatedPinData?.entityId,closeupAttributionId:n?.closeupAttribution?.entityId,closeupAttributionUsername:n?.closeupAttribution?.username,commentsDisabled:n?.commentsDisabled,disablePhotoCommentSelection:!!n?.doneByMe,hasComments:i>0&&!n?.commentsDisabled,isVideo:!!n?.videos?.videoList,pinId:n?.entityId,pinnerId:n?.pinner?.entityId,storyPinDataId:n?.storyPinData?.entityId,...t})}},858254:function(e,t,n){n.d(t,{C0:()=>i,ZU:()=>o,a0:()=>l});let i=["DMCA","Trademark","GDPR"],o=new Date(2024,0,1),l={test:{LAW:"test",DECIDER_KEY:"legal_webapp_takedown_form_test",COUNTRY_CODES:["US"],API:"/v3/legal/takedowns/test/",COMPLAINTS_OFFICE:!0,TRUSTED_FLAGGER:!1,RESTRICT_MULTIPLE_LAWS:!1,ALLOW_ANON_SUBMISSION:!1},turkey:{LAW:"turkey",DECIDER_KEY:"legal_webapp_takedown_form_turkey",COUNTRY_CODES:["TR"],API:"/v3/legal/takedowns/turkey/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!1,TRUSTED_FLAGGER:!1},dsa:{LAW:"dsa",DECIDER_KEY:"legal_webapp_takedown_form_dsa",COUNTRY_CODES:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"],API:"/v3/legal/takedowns/dsa/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!0},india:{LAW:"india",DECIDER_KEY:"legal_webapp_takedown_form_india",COUNTRY_CODES:["IN"],API:"/v3/legal/takedowns/india/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!1}}},646239:function(e,t,n){n.d(t,{Z:()=>l});var i=n(442279),o=n(438274);let l=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${o.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??{},(e,t,n,i)=>{let o=new Set;return t?.map(({id:t,type:l})=>{if(o.has(t))return;o.add(t);let s="aggregatedcomment"===l.toLowerCase()?e[t]:n[t];if(!s)return;let a="user"in s&&("string"==typeof s.user?i[s.user]??{}:s.user??{});return{...s,user:a??{}}}).filter(e=>void 0!==e)||[]})},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/11756-9148ea88bb4e0ccc.mjs.map